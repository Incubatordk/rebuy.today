---
const base = import.meta.env.BASE_URL;
---
<header class="header">
  <div class="container header-inner">
    <a href={base} class="header-logo" aria-label="Rebuy forside">
      <svg class="logo-icon" width="32" height="32" viewBox="0 0 540 400" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path fill="var(--color-brand-pink)" d="M223.017 185.149h12.891V139.05c0-27.094-22.047-49.14-49.148-49.14-27.102 0-49.142 22.046-49.142 49.14v46.098h12.885l-17.724 93.1h107.592zm-36.257-81.77c19.673 0 35.676 16.009 35.676 35.672v45.77h-71.353v-45.77c0-19.667 16.003-35.672 35.677-35.672"/>
        <path fill="var(--color-brand-pink)" d="M138.738 92.274c4.234 0 10.385-.694 15.62-3.958a18.27 18.27 0 0 0 7.042-7.964 41.186 41.186 0 0 0 24.854 8.343c22.901 0 41.53-18.632 41.53-41.525.003-22.9-18.625-41.532-41.526-41.532-22.901 0-41.53 18.631-41.53 41.532 0 2.622.27 5.183.744 7.67h-.061c-12.906 0-19.742 13.881-23.417 21.34-.625 1.263-1.134 2.335-1.57 3.049l-3.648 5.897 6.004 3.47c3.978 2.301 9.94 3.678 15.958 3.678"/>
      </svg>
      <span class="logo-text">Rebuy</span>
    </a>

    <nav class="header-nav" id="main-nav" aria-label="Hovednavigation">
      <a href="#funktioner">Funktioner</a>
      <a href="#saadan-virker-det">Sådan virker det</a>
      <a href="#udtalelser">Udtalelser</a>
      <a href="#download" class="nav-cta">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
        Download appen
      </a>
    </nav>

    <button class="header-menu-btn" id="menu-btn" aria-label="Åbn menu" aria-expanded="false" aria-controls="main-nav">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
        <line class="menu-line menu-line-1" x1="4" y1="7" x2="20" y2="7"/>
        <line class="menu-line menu-line-2" x1="4" y1="12" x2="20" y2="12"/>
        <line class="menu-line menu-line-3" x1="4" y1="17" x2="20" y2="17"/>
      </svg>
    </button>
  </div>
</header>

<style>
  .header {
    position: sticky;
    top: 0;
    z-index: 100;
    background: rgba(250, 250, 249, 0.85);
    backdrop-filter: blur(16px) saturate(180%);
    -webkit-backdrop-filter: blur(16px) saturate(180%);
    border-bottom: 1px solid rgba(0, 0, 0, 0.04);
  }

  .header-inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 4rem;
  }

  .header-logo {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    color: var(--color-text-primary);
  }

  .logo-text {
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-bold);
    letter-spacing: -0.02em;
  }

  .header-nav {
    display: flex;
    align-items: center;
    gap: var(--space-10);
  }

  .header-nav a {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-secondary);
    transition: color 0.2s ease;
    letter-spacing: 0.01em;
  }

  .header-nav a:hover {
    color: var(--color-text-primary);
  }

  .nav-cta {
    display: inline-flex !important;
    align-items: center;
    gap: var(--space-2);
    background: var(--color-text-primary);
    color: var(--color-bg-card) !important;
    padding: var(--space-2) var(--space-5);
    border-radius: var(--radius-full);
    font-weight: var(--font-weight-semibold) !important;
    transition: transform 0.2s ease, box-shadow 0.2s ease !important;
  }

  .nav-cta:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
    color: var(--color-bg-card) !important;
  }

  .header-menu-btn {
    display: none;
    background: none;
    border: none;
    cursor: pointer;
    color: var(--color-text-primary);
    padding: var(--space-2);
  }

  @media (max-width: 768px) {
    .header-nav {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      flex-direction: column;
      background: var(--color-bg-primary);
      border-bottom: 1px solid var(--color-border);
      padding: var(--space-6);
      gap: var(--space-5);
      box-shadow: var(--shadow-lg);
    }

    .header-nav.nav-open {
      display: flex;
    }

    .header-nav a {
      font-size: var(--font-size-md);
    }

    .header-menu-btn {
      display: block;
    }
  }
</style>

<script>
  const menuBtn = document.getElementById('menu-btn');
  const nav = document.getElementById('main-nav');
  if (menuBtn && nav) {
    menuBtn.addEventListener('click', () => {
      const expanded = menuBtn.getAttribute('aria-expanded') === 'true';
      menuBtn.setAttribute('aria-expanded', String(!expanded));
      nav.classList.toggle('nav-open');
    });
  }
</script>
